title: –ó–∞–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ —Ä—É—Å—Å–∫–∏—Ö —Å—Ç—Ä–æ–∫ –Ω–∞ PhraseProvider
status: done
created_at: 15.02.2026
completed_at: 15.02.2026

todoist:
  task_id: "6g2g8h25GCPHpCrF"

description: |
  –í StaffReplyHandler ("üë§ –°–æ—Ç—Ä—É–¥–Ω–∏–∫:") –∏ SupportMirrorMessenger ("ü§ñ –ë–æ—Ç:")
  –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã —Ä—É—Å—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–º–µ–µ—Ç —Å–∏—Å—Ç–µ–º—É –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç–∏ (PhraseProvider),
  –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ—ë –∑–¥–µ—Å—å.

recommendation: |
  –í—ã–Ω–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –≤ phrases –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PhraseProvider –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
  –Ω–∞ –Ω—É–∂–Ω–æ–º —è–∑—ã–∫–µ.

solution: |
  –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–ª—é—á–∏ —Ñ—Ä–∞–∑ –≤ bot_framework/data/phrases.json:
  - support.staff_prefix (ru: "üë§ –°–æ—Ç—Ä—É–¥–Ω–∏–∫:", en: "üë§ Staff:")
  - support.bot_prefix (ru: "ü§ñ –ë–æ—Ç:", en: "ü§ñ Bot:")

  –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–ª–∞—Å—Å—ã:
  1. StaffReplyHandler:
     - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä phrase_repo: IPhraseRepo –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
     - –ú–µ—Ç–æ–¥ _send_to_user —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç user –≤–º–µ—Å—Ç–æ chat_id
     - –ü—Ä–µ—Ñ–∏–∫—Å –ø–æ–ª—É—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ phrase_repo.get_phrase() —Å language_code –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

  2. SupportMirrorMessenger:
     - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã user_repo: IUserRepo –∏ phrase_repo: IPhraseRepo –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
     - –ú–µ—Ç–æ–¥ _mirror_text –ø–æ–ª—É—á–∞–µ—Ç user –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø–æ chat_id
     - –ü—Ä–µ—Ñ–∏–∫—Å –ø–æ–ª—É—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ phrase_repo.get_phrase() —Å language_code –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

  3. BotApplication._setup_support_chat:
     - –ü–µ—Ä–µ–¥–∞—á–∞ phrase_provider –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã StaffReplyHandler –∏ SupportMirrorMessenger
     - –ü–µ—Ä–µ–¥–∞—á–∞ user_repo –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä SupportMirrorMessenger

  –¢–µ–ø–µ—Ä—å –ø—Ä–µ—Ñ–∏–∫—Å—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
